apiVersion: v1
kind: Pod
type: parser-type 
spec:
  containers:
    - name: parser
      image: giovaz94/mail-pipeline-general
      imagePullPolicy: IfNotPresent
      ports:
        - containerPort: 80
      resources:
        requests:
          cpu: "10m"
          memory: "10M"
      env:
        - name: MCL
          value: "110"
        - name: REDIS_HOST
          value: "redis-service"
        - name: SERVICE_NAME
          value: "parser"
        - name: PORT
          value: "80"
        - name: MAX_SIZE
          value: "800"
        - name: MAX_CONNECTIONS
          value: "70"
        - name: PIPELINE_COUNT
          value: "1"
  restartPolicy: Always

ports:
  strong:
    - type: "virus-scanner-service-type"
      id: PORT_VIRUS_SCANNER_SERVICE
      value: 1
    - type: "header-analyzer-service-type"
      id: PORT_HEADER_ANALYZER_SERVICE
      value: 1
    - type: "text-analyzer-service-type"
      id: PORT_TEXT_ANALYZER_SERVICE
      value: 1
    - type: "link-analyzer-service-type"
      id: PORT_LINK_ANALYZER_SERVICE
      value: 1